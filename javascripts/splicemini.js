const Splice=function(){function e(e,t,n=!1){let c=0,r=t.length;for(;r<=e.length;){if(e.slice(c,r)==t&&e.slice(c-1,r)!="\\"+t)return n?[e.slice(0,c),e.slice(c+t.length)]:[e.slice(0,c),e.slice(c)];c++,r++}return[e,""]}function t(t,n,c){return n.slice(1).reduce(([n,r],i)=>{let[l,u]=e(t,i,c);return Math.min(l.length,n.length)==l.length?[l,u]:[n,r]},e(t,n[0],c))}function n(e){const t=[];for(;e;)e=c(e,t);return t}function c(t,n){let c,i,l;return(i=t.match(/^\(:/))?"~"==t[2]?([l,t]=function(t){let[n,c]=t.match(/^\(:~\s*(\w+)/);t=t.slice(n.length),[n,t]=e(t,"{");let i=n.match(/\S+/g)||[];return[bodyAST,t]=r(t.slice(1)),i=i.map(function(e){if("'"==e[0])return{type:"text",value:e};let t=e.split(".");return{type:"binding",name:t[0],chain:t.slice(1),escape:!0}}),[{type:"op",name:c,args:i,body:bodyAST},t]}(t),n.push(l)):([l,t]=function(t){let n,c=!0;"!"==t[2]&&(c=!1);[n,t]=e(t,":)",!0),n=c?n.slice(2):n.slice(3);let r=n.trim().split(".");const i=r[0],l=r.slice(1);return[{type:"binding",name:i,chain:l,escape:c},t]}(t),n.push(l)):([c,t]=e(t,"(:"),n.push({type:"text",value:c})),t}function r(e){let c="",r=1;for(;0!=r;){if([token,e]=t(e,["(:~","}:)"]),!e)throw"SPLICE SYNTAX ERROR: Expecting '}:)' to close function body.";if("(:~"==e.slice(0,3))r++;else{if("}:)"!=e.slice(0,3))throw"BUG";r--}c+=0==r?token:token+e.slice(0,3),e=e.slice(3)}return[n(c),e]}function i(e,t){return e.reduce(function(e,n){return e+l(n,t)},"")}function l(e,t){switch(e.type){case"op":return o[e.name](t,...e.args,e.body);case"binding":let n=e.chain.reduce(function(e,t){return e[t]},t[e.name]);return"string"==typeof n&&e.escape?n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):n;case"text":return function(e){let t="",n=0;for(match of e.matchAll(/\\[\S\s]/g))t+=e.slice(n,match.index),t+=match[0].slice(1),n=match.index+2;return t+e.slice(n)}(e.value);default:throw"Invalid Node Type in AST"}}const u=Object.create(null),o=Object.create(null);return o.if=function(e,t,n){const c=Object.assign({},e);return l(t,c)?i(n,c):""},o.unless=function(e,t,n){const c=Object.assign({},e);return l(t,c)?"":i(n,c)},o.each=function(e,t,n,c,r){return!r&&n&&(r=n,n=null,c=null),l(t,e).reduce(function(t,n){const l=Object.assign({},e);return c&&(l[c.value.slice(1)]=n),l.$=n,t+i(r,l)},"")},o.def=function(e,t,n){switch(n.type){case"binding":e[t.value.slice(1)]=n.chain.reduce(function(e,t){return e[t]},e[n.name]);break;case"text":e[t.value.slice(1)]=n.value.slice(1);break;default:throw new SyntaxError("Unexpected")}return""},o.in=function(e,t,n){return i(n,l(t,e))},o.comment=function(e){return""},o.partial=function(e,t){return i(u[t.name],e)},{render(e,t="#template"){const c=document.querySelector(t);!function(e,t){const n=document.createElement("div");n.innerHTML=t;const c=Array.from(n.childNodes),r=e.parentNode;let i=c[c.length-1];r.replaceChild(i,e);for(let e=c.length-2;e>=0;--e)r.insertBefore(c[e],i),i=c[e]}(c,i(n(c.innerHTML),e))},compile(e){const t=n(e);return function(e){return i(t,e)}},registerPartial(e,t){if(t)return void(u[e]=n(t));t=document.getElementById(e).innerHTML,u[e]=n(t)}}}();
